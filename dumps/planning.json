{"problems": [{"description": "\n            The AttributeError 'NoneType' object has no attribute 'replace' indicates that the function get_prev_schedule is returning None for a certain input condition. This likely means the rrule.before(reference_ts) call is returning None, which can happen if there is no occurrence of the rule before the given timestamp 'reference_ts'. The problem might lie in how the 'start_ts' and 'reference_ts' values are being calculated or passed. If 'start_ts' is set after the 'reference_ts', or there are no occurrences of the event in the interval, rrule.before() would return None.\n        ", "code_snippets": [{"code": "\n            def get_prev_schedule(\n                start_ts: datetime,\n                reference_ts: datetime,\n                schedule: ScheduleConfig,\n            ) -> datetime:\n                \"\"\"\n                Given the schedule type and schedule, determine the previous timestamp for a\n                schedule from the reference_ts. Requires `start_ts` to accurately compute\n                \"\"\"\n                if schedule.type == \"interval\":\n                    rule = rrule.rrule(\n                        freq=SCHEDULE_INTERVAL_MAP[schedule.unit],\n                        interval=schedule.interval,\n                        dtstart=start_ts,\n                        until=reference_ts,\n                    )\n                    return rule.before(reference_ts).replace(second=0, microsecond=0)\n                # Other conditions are omitted for brevity\n        ", "filename": "src/sentry/monitors/schedule.py", "description": null}]}]}
